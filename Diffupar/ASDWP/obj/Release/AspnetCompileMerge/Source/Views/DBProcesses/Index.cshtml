@model IEnumerable<ASDWP.Models.DBProcess>

@{
    ViewBag.Title = "Index";
}

<header>
    <script>
        setInterval("location.reload()", 10000);
    </script>
</header>

<h2>Procesos</h2>

<table class="table">
    <tr>
        <th style="width:200px;">
            @Html.DisplayNameFor(model => model.NombreArchivo)
        </th>

        <th style="width:200px;">
            @Html.DisplayNameFor(model => model.FechaCarga)
        </th>
        <th>Tipo Proceso</th>
        <th style="width:200px;">
            @Html.DisplayNameFor(model => model.Estado)
        </th>
        <th>

        </th>
        <th style="width:200px;">
            @Html.DisplayNameFor(model => model.FechaProcesado)
        </th>
        <th>
            Detalle
        </th>

    </tr>

    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.NombreArchivo)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FechaCarga)
            </td>
            <td>
                @item.TipoProceso
            </td>
            <td>
                @item.Estado
                @{
                    if (item.Estado == "Procesando")
                    {
                        <img src="~/Content/image/Procesando.gif" width="18" height="18" />
                        <a class="btn-grid" href="@Url.Action("updateEstado", "DbProcesses", new { id = item.Id, cancel=1 }) "><span><img src="~/Content/image/cancel.png" style="zoom:90%;" /></span></a>
                    }
                    else
                    {
                        if (item.Estado != "Pendiente")
                        {
                            <a class="btn-grid" href="@Url.Action("updateEstado", "DbProcesses", new { id = item.Id }) "><span><img src="~/Content/image/iconos_Agregar.png" style="zoom:70%;" /></span></a>
                        }
                    }
                }

            </td>
            <td>
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.FechaProcesado)
            </td>
            <td>
                @Html.DisplayFor(modelItem => item.EstadoDescripcion)
            </td>
        </tr>
    }
</table>

